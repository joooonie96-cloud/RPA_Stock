name: telegram-daily

on:
  schedule:
    - cron: "45 6 * * 1-5"   # í‰ì¼ë§Œ KST 15:45 (UTC 06:45)
  workflow_dispatch:

jobs:
  run:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"

      # ğŸ”¹ í•„ìš”í•œ íŒŒì´ì¬ íŒ¨í‚¤ì§€ ì„¤ì¹˜
      - name: Install Python dependencies
        run: |
          python -m pip install --upgrade pip
          pip install requests beautifulsoup4 selenium

      # ğŸ”¹ í¬ë¡¬ + í¬ë¡¬ë“œë¼ì´ë²„ ì„¤ì¹˜ (Seleniumì´ ì‹¤ì œ ë¸Œë¼ìš°ì €ë¡œ DOM ê¸ì–´ì˜¤ê¸° ìœ„í•´ í•„ìš”)
      - name: Install Chrome & Chromedriver
        run: |
          sudo apt-get update
          sudo apt-get install -y chromium-browser chromium-chromedriver
          sudo ln -s /usr/bin/chromium-browser /usr/bin/google-chrome || true
          sudo ln -s /usr/bin/chromedriver /usr/bin/chromedriver || true

      # ğŸ”¹ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰
      - name: Run script
        env:
          BOT_TOKEN: ${{ secrets.BOT_TOKEN }}
          CHAT_ID: ${{ secrets.CHAT_ID }}
        run: python fetch_and_send.py
